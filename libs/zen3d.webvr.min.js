!function(){var t=function(e){t.superClass.constructor.call(this,e),this.vrDisplay=void 0,navigator.getVRDisplays?navigator.getVRDisplays().then(function(t){t.length>0?this.vrDisplay=t[0]:console.warn("HMD not available")}.bind(this)).catch(function(){console.warn("RendererVR: Unable to get VR Displays")}):console.warn("getVRDisplays not exist in navigator"),this.frameData=null,"VRFrameData"in window?this.frameData=new window.VRFrameData:console.warn("VRFrameData not exist")};zen3d.inherit(t,zen3d.Renderer);var e=new zen3d.Matrix4;t.prototype.render=function(t,a,r,i){var n=this.vrDisplay,s=this.frameData,o=a.cameraL,c=a.cameraR;n&&(n.depthNear=a.near,n.depthFar=a.far,n.getFrameData(s),o.projectionMatrix.elements=s.leftProjectionMatrix,e.elements=s.leftViewMatrix,e.inverse().decompose(o.position,o.quaternion,o.scale),o.position.add(a.position),o.updateMatrix(),c.projectionMatrix.elements=s.leftProjectionMatrix,e.elements=s.rightViewMatrix,e.inverse().decompose(c.position,c.quaternion,c.scale),c.position.add(a.position),c.updateMatrix(),this.matrixAutoUpdate&&t.updateMatrix(),this.lightsAutoupdate&&t.updateLights(),(this.shadowAutoUpdate||this.shadowNeedsUpdate)&&(this.shadowMapPass.render(this.glCore,t),this.shadowNeedsUpdate=!1),void 0===r&&(r=this.backRenderTarget),this.glCore.texture.setRenderTarget(r),(this.autoClear||i)&&(this.glCore.state.clearColor(0,0,0,0),this.glCore.clear(!0,!0,!0)),this.glCore.render(t,o,!0),this.glCore.render(t,c,!0),r.texture&&this.glCore.texture.updateRenderTargetMipmap(r),n.submitFrame())},zen3d.RendererVR=t}(),function(){var t=function(){t.superClass.constructor.call(this),this.type=zen3d.OBJECT_TYPE.CAMERA,this.cameraL=new zen3d.Camera,this.cameraR=new zen3d.Camera,this.cameraL.rect.set(0,0,.5,1),this.cameraR.rect.set(.5,0,1,1),this.near=1,this.far=1e3};zen3d.inherit(t,zen3d.Object3D),Object.defineProperties(t.prototype,{gammaFactor:{get:function(){return this.cameraL.gammaFactor},set:function(t){this.cameraL.gammaFactor=t,this.cameraR.gammaFactor=t}},gammaInput:{get:function(){return this.cameraL.gammaInput},set:function(t){this.cameraL.gammaInput=t,this.cameraR.gammaInput=t}},gammaOutput:{get:function(){return this.cameraL.gammaOutput},set:function(t){this.cameraL.gammaOutput=t,this.cameraR.gammaOutput=t}}}),zen3d.CameraVR=t}();